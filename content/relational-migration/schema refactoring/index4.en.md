---
title : "Generate Table Definition in a script"
weight : 26
---

### Automate the table definition
Reviewing the proposed table definition in the web app is a nice way to review and learn the DynamoDB table format.
However, we also want the ability to run this from a command line, 
so that it could be included in a script and automated.

### mysql_desc_ddb.py
1. In the command prompt, make sure you are still in the project's root folder: ```aws-dynamodb-examples/workshops/relational-migration```
2. Type ```ls``` to review the scripts available to you.

3. Run:
```bash 
python3 mysql_desc_ddb.py Customers 
```
The script should output a table definition in JSON format, like we saw within the web app.

3. Next, let's pipe the output to a new file so we can more easily review it:
```bash 
python3 mysql_desc_ddb.py Customers > Customers.json
```

4. Within the left nav, find ```Customers.json``` and double click to open it in the editor.

::alert[When migrating to DynamoDB, it is important to consider how many GSI indexes you want. You may feel that your current relational table has too many indexes, or too few, to efficiently process both search requests and write traffic against the table. While you can create a table with the exact same indexes in DynamoDB, consider that you can adjust the number of indexes by adding, removing, or changing the index definitions, by updating this file.]

For now, we approve the proposed GSI index definitions generated by the script, so no changes are needed.

### Script Details

5. In the left nav, double click on the Python script to open it in the editor:  ```mysql_desc_ddb.py```

This script runs as a client against the local Chalice project code, so it doesn't require 
any network access to the API endpoint we deployed earlier.

At the bottom of the script is the convert_type() function. Here you can see the mappings 
we have chosen between MySQL datatypes and the common string (S) and number (N) datatypes in DynamoDB.

![Data Type Conversions](/static/images/relational-migration/type_conversion.png)

### Check point

So far, we have learned that relational tables can be recreated as DynamoDB tables with similar 
primary key and index definitions.
For some migrations, a one-for-one direct table migration is ideal. We will perform such a migration later in the Data Migration section of the workshop 
when we move a table and existing data into a DynamoDB table.

But, migrations also can require transformation of multiple tables into a single DynamoDB table. 
We will explore this path next.

